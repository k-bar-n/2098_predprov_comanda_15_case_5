# 2098_predprov_comanda_15_case_5

## Полный план работы, включающий объяснение всех тонкостей, назначения файлов и логику работы приложения:

**1. Анализ требований**

*   **Цель:** Разработать веб-приложение для управления спортивным инвентарем в школе, используя JSON-файлы для хранения данных.
*   **Пользователи:**
    *   **Администратор:** Обладает полным доступом к управлению инвентарем, пользователями, закупками и отчетами.
    *   **Пользователь:** Имеет ограниченный доступ, может просматривать инвентарь, подавать заявки и отслеживать их статус.
*   **Функциональность:**
    *   **Администратор:**
        *   Авторизация: Обеспечивает доступ к административным функциям.
        *   Управление инвентарем: Добавление, редактирование, просмотр и удаление предметов инвентаря.
        *   Закрепление инвентаря: Назначение инвентаря пользователям.
        *   Планирование закупок: Добавление, просмотр и управление планами закупок.
        *   Создание отчетов: Формирование отчетов о состоянии и использовании инвентаря.
    *   **Пользователь:**
        *   Регистрация/Авторизация: Обеспечивает доступ к пользовательским функциям.
        *   Просмотр инвентаря: Просмотр доступного инвентаря и его состояния.
        *   Подача заявок: Создание заявок на получение, ремонт или замену инвентаря.
        *   Отслеживание статуса заявок: Просмотр текущего статуса поданных заявок.
        *   Заявки на ремонт/замену (дополнительно): Возможность создавать заявки на ремонт или замену поврежденного инвентаря.
*   **Технические требования:**
    *   Веб-интерфейс: Приложение должно быть доступно через веб-браузер.
    *   Клиент-серверная архитектура (упрощенная): Приложение будет использовать модель клиент-сервер, где клиент (браузер) взаимодействует с сервером (Flask).
    *   JSON для хранения данных: Данные будут храниться в формате JSON в отдельных файлах.
    *   Система контроля версий: Использование Git для отслеживания изменений кода.
    *   Упрощенная установка: Инструкция для запуска приложения.
*   **Документация:**
    *   Титульный лист.
    *   Обоснование выбора технологий.
    *   Структурная и функциональная схемы.
    *   Блок-схема основного алгоритма.
    *   Описание структуры данных (JSON).
    *   Схема базы данных (JSON).
    *   Программный код (ссылка на репозиторий), файл README.

**2. План разработки**

1.  **Выбор технологий:**
    *   **Язык программирования:** Python 3.x.
        *   **Обоснование:** Python - простой в освоении и широко используемый язык, подходящий для веб-разработки.
    *   **Веб-фреймворк:** Flask.
        *   **Обоснование:** Flask – минималистичный и легкий веб-фреймворк, удобный для создания простых веб-приложений.
    *   **Фронтенд:** HTML, CSS, JavaScript.
        *   **Обоснование:** Стандартные технологии для создания пользовательского интерфейса.
    *   **Система контроля версий:** Git.
        *   **Обоснование:** Git – необходимый инструмент для отслеживания изменений в коде и совместной работы.
    *   **Управление зависимостями:** pip.
        *   **Обоснование:** pip – стандартный менеджер пакетов для Python.

2.  **Структура данных (JSON-файлы):**
    *   **`users.json`:**
        *   **Назначение:** Хранит информацию о пользователях приложения (администраторах и обычных пользователях).
        *   **Структура:** Массив JSON-объектов, где каждый объект представляет собой пользователя:
            ```json
            [
                {
                    "id": 1,
                    "username": "admin",
                    "password": "password",
                    "role": "admin"
                },
                 {
                    "id": 2,
                    "username": "user1",
                    "password": "password",
                    "role": "user"
                 }
            ]
            ```
        *   **Поля:**
            *   `id`: Уникальный идентификатор пользователя.
            *   `username`: Имя пользователя для входа.
            *   `password`: Пароль пользователя.
            *   `role`: Роль пользователя ("admin" или "user").

    *   **`inventory.json`:**
        *   **Назначение:** Хранит информацию о доступном инвентаре.
        *   **Структура:** Массив JSON-объектов, где каждый объект представляет собой предмет инвентаря:
            ```json
            [
                {
                    "id": 1,
                    "name": "Мяч баскетбольный",
                    "quantity": 10,
                    "state": "новый"
                },
                {
                    "id": 2,
                    "name": "Скакалка",
                    "quantity": 20,
                    "state": "используется"
                 }
            ]
            ```
        *   **Поля:**
            *   `id`: Уникальный идентификатор предмета инвентаря.
            *   `name`: Название предмета инвентаря.
            *   `quantity`: Общее количество данного предмета в наличии.
            *   `state`: Текущее состояние предмета ("новый", "используется", "сломан").

    *   **`inventory_assignments.json`:**
        *   **Назначение:** Отслеживает, какой инвентарь и в каком количестве закреплен за каким пользователем.
        *   **Структура:** Массив JSON-объектов, где каждый объект представляет собой назначение инвентаря:
            ```json
             [
                {
                    "id": 1,
                    "user_id": 2,
                    "inventory_id": 1,
                    "quantity_assigned": 1,
                    "assignment_date": "2024-01-02"
                },
                {
                     "id": 2,
                    "user_id": 3,
                    "inventory_id": 2,
                    "quantity_assigned": 5,
                    "assignment_date": "2024-01-05"
                }
            ]
            ```
        *   **Поля:**
            *   `id`: Уникальный идентификатор назначения.
            *   `user_id`: Идентификатор пользователя, за которым закреплен инвентарь.
            *   `inventory_id`: Идентификатор предмета инвентаря.
            *   `quantity_assigned`: Количество выданного инвентаря.
            *   `assignment_date`: Дата назначения инвентаря.

    *   **`purchase_plans.json`:**
        *   **Назначение:** Хранит планы закупок нового инвентаря.
        *   **Структура:** Массив JSON-объектов, где каждый объект представляет собой план закупки:
            ```json
            [
                {
                    "id": 1,
                    "inventory_id": 2,
                    "quantity": 10,
                    "price": 150,
                    "supplier": "Спортмастер"
                },
                {
                    "id": 2,
                    "inventory_id": 1,
                    "quantity": 5,
                    "price": 100,
                    "supplier": "Декатлон"
                }
            ]
            ```
        *   **Поля:**
            *   `id`: Уникальный идентификатор плана закупки.
            *   `inventory_id`: Идентификатор предмета инвентаря, который планируется закупить.
            *   `quantity`: Планируемое количество для закупки.
            *   `price`: Цена за единицу товара.
            *   `supplier`: Название поставщика.

    *   **`requests.json`:**
        *   **Назначение:** Хранит информацию о заявках пользователей на получение, ремонт или замену инвентаря.
        *   **Структура:** Массив JSON-объектов, где каждый объект представляет собой заявку:
            ```json
            [
                {
                    "id": 1,
                    "user_id": 2,
                    "inventory_id": 1,
                    "quantity_requested": 1,
                    "status": "pending",
                    "request_type": "get",
                    "request_date": "2024-01-02"
                },
                {
                   "id": 2,
                    "user_id": 3,
                    "inventory_id": 2,
                    "quantity_requested": 1,
                    "status": "approved",
                    "request_type": "repair",
                    "request_date": "2024-01-05"
                 }
            ]
            ```
        *   **Поля:**
            *   `id`: Уникальный идентификатор заявки.
            *   `user_id`: Идентификатор пользователя, подавшего заявку.
            *   `inventory_id`: Идентификатор предмета инвентаря, на который подана заявка.
            *   `quantity_requested`: Запрашиваемое количество.
            *   `status`: Статус заявки ("pending", "approved", "rejected").
            *   `request_type`: Тип заявки ("get", "repair", "replace").
             *  `request_date`: Дата подачи заявки

3.  **Разработка:**
    *   **Создание Flask приложения:**
        *   Настройка структуры проекта.
        *   Определение маршрутов (URL) для различных страниц и функций.
    *   **Реализация функций для работы с JSON:**
        *   Функции для чтения JSON-файлов.
        *   Функции для записи в JSON-файлы.
    *   **Реализация функций авторизации/регистрации:**
        *   Проверка наличия пользователя в `users.json`.
        *   Сравнение введенных данных с данными в JSON-файле.
    *   **Разработка HTML-шаблонов для интерфейса:**
        *   Создание HTML-страниц для отображения данных и форм.
    *   **Реализация функциональности для администратора:**
        *   Добавление, редактирование, удаление инвентаря в `inventory.json`.
        *   Закрепление инвентаря за пользователями в `inventory_assignments.json`.
        *   Планирование закупок в `purchase_plans.json`.
        *   Создание отчетов на основе данных из JSON.
    *   **Реализация функциональности для пользователя:**
        *   Просмотр инвентаря из `inventory.json`.
        *   Подача заявок в `requests.json`.
        *   Отслеживание статуса заявок в `requests.json`.
        *   Создание заявок на ремонт/замену (дополнительно) в `requests.json`.

4.  **Документация:**
    *   Подготовка всех необходимых документов в соответствии с требованиями.

5.  **Тестирование:**
    *   Проверка работоспособности всех функций приложения.

6.  **Деплой:**
    *   Подготовка инструкции по развертыванию.
    *   Развертывание приложения на выбранном сервере.

**3. Подробное описание этапов:**

1.  **Технологии:**
    *   Flask – для backend-логики.
    *   HTML, CSS, JS для frontend.
2.  **JSON:**
    *   Использование стандартной библиотеки Python `json`.
    *   Файлы с описанной выше структурой.
3.  **Фронтенд:**
    *   HTML - структура страниц.
    *   CSS - стилизация.
    *   JS - динамика.
4.  **Разработка:**
    *   Создание Flask приложения, маршрутов, функций.
    *   Реализация логики для каждого уровня доступа (админ, пользователь).
5.  **Авторизация:**
    *   Чтение файла `users.json` для проверки данных.
    *   Сравнение введенных логина и пароля.

**4. Шаги:**
    *   Создать репозиторий на GitHub.
    *   Создать Flask проект.
    *   Создать JSON файлы.
    *   Разработать функции для работы с JSON.
    *   Разработать авторизацию/регистрацию.
    *   Разработать шаблоны страниц и функционал.
