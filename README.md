## Полный план работы, включающий объяснение всех тонкостей, назначения файлов и логику работы приложения:

**1. Анализ требований**

- **Цель:** Разработать веб-приложение для управления спортивным инвентарем в школе, используя JSON-файлы для хранения данных.
- **Пользователи:**
  - **Администратор:** Обладает полным доступом к управлению инвентарем, пользователями, закупками и отчетами.
  - **Пользователь:** Имеет ограниченный доступ, может просматривать инвентарь, подавать заявки и отслеживать их статус.
- **Функциональность:**
  - **Администратор:**
    - Авторизация: Обеспечивает доступ к административным функциям.
    - Управление инвентарем: Добавление, редактирование, просмотр и удаление предметов инвентаря.
    - Закрепление инвентаря: Назначение инвентаря пользователям.
    - Планирование закупок: Добавление, просмотр и управление планами закупок.
    - Создание отчетов: Формирование отчетов о состоянии и использовании инвентаря.
  - **Пользователь:**
    - Регистрация/Авторизация: Обеспечивает доступ к пользовательским функциям.
    - Просмотр инвентаря: Просмотр доступного инвентаря и его состояния.
    - Подача заявок: Создание заявок на получение, ремонт или замену инвентаря.
    - Отслеживание статуса заявок: Просмотр текущего статуса поданных заявок.
    - Заявки на ремонт/замену (дополнительно): Возможность создавать заявки на ремонт или замену поврежденного инвентаря.
- **Технические требования:**
  - Веб-интерфейс: Приложение должно быть доступно через веб-браузер.
  - Клиент-серверная архитектура (упрощенная): Приложение использует модель клиент-сервер, где клиент (браузер) взаимодействует с сервером (Flask).
  - JSON для хранения данных: Данные хранятся в формате JSON в отдельных файлах.
  - Система контроля версий: Использование Git для отслеживания изменений кода.
  - Упрощенная установка: Инструкция для запуска приложения.
- **Документация:**
  - Титульный лист.
  - Обоснование выбора технологий.
  - Структурная и функциональная схемы.
  - Блок-схема основного алгоритма.
  - Описание структуры данных (JSON).
  - Схема базы данных (JSON).
  - Программный код (ссылка на репозиторий), файл README.

**2. План разработки**

1.  **Выбор технологий:**

    - **Язык программирования:** Python 3.x.
      - **Обоснование:** Python - простой в освоении и широко используемый язык, подходящий для веб-разработки.
    - **Веб-фреймворк:** Flask.
      - **Обоснование:** Flask – минималистичный и легкий веб-фреймворк, удобный для создания простых веб-приложений.
    - **Фронтенд:** HTML, CSS, JavaScript.
      - **Обоснование:** Стандартные технологии для создания пользовательского интерфейса.
    - **Система контроля версий:** Git.
      - **Обоснование:** Git – необходимый инструмент для отслеживания изменений в коде и совместной работы.
    - **Управление зависимостями:** pip.
      - **Обоснование:** pip – стандартный менеджер пакетов для Python.

2.  **Структура данных (JSON-файлы):**

    - **`users.json`:**

      - **Назначение:** Хранит информацию о пользователях приложения (администраторах и обычных пользователях).
      - **Структура:** Массив JSON-объектов, где каждый объект представляет собой пользователя:
        ```json
        [
          {
            "id": 1,
            "username": "admin",
            "password": "pa",
            "role": "admin"
          }
        ]
        ```
      - **Поля:**
        - `id`: Уникальный идентификатор пользователя.
        - `username`: Имя пользователя для входа.
        - `password`: Пароль пользователя.
        - `role`: Роль пользователя ("admin" или "user").

    - **`inventory.json`:**

      - **Назначение:** Хранит информацию о доступном инвентаре.
      - **Структура:** Массив JSON-объектов, где каждый объект представляет собой предмет инвентаря:
        ```json
        [
           {
            "id": 1,
               "name": "Спорт-обувь",
               "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTdvFZoLvLfzrOp8UKsbjkDl3_dh4S6OHAScg&s",
               "quantity": 10,
               "state": "новый",
               "price": 2999
             },
               ...
        ]
        ```
      - **Поля:**
        - `id`: Уникальный идентификатор предмета инвентаря.
        - `name`: Название предмета инвентаря.
        - `image`: URL изображения предмета инвентаря.
        - `quantity`: Общее количество данного предмета в наличии.
        - `state`: Текущее состояние предмета ("новый", "используется", "сломан").
        - `price`: Цена товара

    - **`inventory_assignments.json`:**

      - **Назначение:** Отслеживает, какой инвентарь и в каком количестве закреплен за каким пользователем.
      - **Структура:** Массив JSON-объектов, где каждый объект представляет собой назначение инвентаря:
        Пример реализации:
        ```json
        [
          {
            "id": 1,
            "user_id": 2,
            "inventory_id": 1,
            "quantity_assigned": 1,
            "assignment_date": "2024-01-02"
          },
          {
            "id": 2,
            "user_id": 3,
            "inventory_id": 2,
            "quantity_assigned": 5,
            "assignment_date": "2024-01-05"
          }
        ]
        ```
      - **Поля:**
        - `id`: Уникальный идентификатор назначения.
        - `user_id`: Идентификатор пользователя, за которым закреплен инвентарь.
        - `inventory_id`: Идентификатор предмета инвентаря.
        - `quantity_assigned`: Количество выданного инвентаря.
        - `assignment_date`: Дата назначения инвентаря.

    - **`purchase_plans.json`:**

      - **Назначение:** Хранит планы закупок нового инвентаря.
      - **Структура:** Массив JSON-объектов, где каждый объект представляет собой план закупки:
        Пример реализации:
        ```json
        [
          {
            "id": 1,
            "inventory_id": 2,
            "quantity": 10,
            "price": 150,
            "supplier": "Спортмастер"
          },
          {
            "id": 2,
            "inventory_id": 1,
            "quantity": 5,
            "price": 100,
            "supplier": "Декатлон"
          }
        ]
        ```
      - **Поля:**
        - `id`: Уникальный идентификатор плана закупки.
        - `inventory_id`: Идентификатор предмета инвентаря, который планируется закупить.
        - `quantity`: Планируемое количество для закупки.
        - `price`: Цена за единицу товара.
        - `supplier`: Название поставщика.

    - **`requests.json`:**
      - **Назначение:** Хранит информацию о заявках пользователей на получение, ремонт или замену инвентаря.
      - **Структура:** Массив JSON-объектов, где каждый объект представляет собой заявку:
        Пример реализации:
        ```json
        [
          {
            "id": 1,
            "user_id": 2,
            "inventory_id": 1,
            "quantity_requested": 1,
            "status": "pending",
            "request_type": "get",
            "request_date": "2024-01-02"
          },
          {
            "id": 2,
            "user_id": 3,
            "inventory_id": 2,
            "quantity_requested": 1,
            "status": "approved",
            "request_type": "repair",
            "request_date": "2024-01-05"
          }
        ]
        ```
      - **Поля:**
        - `id`: Уникальный идентификатор заявки.
        - `user_id`: Идентификатор пользователя, подавшего заявку.
        - `inventory_id`: Идентификатор предмета инвентаря, на который подана заявка.
        - `quantity_requested`: Запрашиваемое количество.
        - `status`: Статус заявки ("pending", "approved", "rejected").
        - `request_type`: Тип заявки ("get", "repair", "replace").
        - `request_date`: Дата подачи заявки.

3.  **Разработка:**

    - **Создание Flask приложения:**
      - Настройка структуры проекта (основные каталоги созданы).
      - Определение маршрутов (URL) для различных страниц и функций (реализовано частично).
    - **Реализация функций для работы с JSON:**
      - Функции для чтения JSON-файлов (реализовано).
      - Функции для записи в JSON-файлы (реализовано).
    - **Реализация функций авторизации/регистрации:**
      - Проверка наличия пользователя в `users.json` (реализовано).
      - Сравнение введенных данных с данными в JSON-файле (реализовано).
      - Реализована базовая проверка существования пользователя при регистрации.
      - Реализована анимация и динамика формы регистрации.
    - **Разработка HTML-шаблонов для интерфейса:**
      - Создание HTML-страниц для отображения данных и форм (базовые шаблоны созданы).
      - Реализована динамика и базовая стилизация страниц.
    - **Реализация функциональности для администратора:**
      - Добавление, редактирование, удаление инвентаря в `inventory.json` (требуется реализация).
      - Закрепление инвентаря за пользователями в `inventory_assignments.json` (требуется реализация).
      - Планирование закупок в `purchase_plans.json` (требуется реализация).
      - Создание отчетов на основе данных из JSON (требуется реализация).
    - **Реализация функциональности для пользователя:**
      - Просмотр инвентаря из `inventory.json` (реализовано).
      - Подача заявок в `requests.json` (требуется реализация).
      - Отслеживание статуса заявок в `requests.json` (требуется реализация).
      - Создание заявок на ремонт/замену (дополнительно) в `requests.json` (требуется реализация).
      - Реализована фильтрация и добавление товаров в корзину.

4.  **Документация:**

    - Подготовка всех необходимых документов в соответствии с требованиями (в процессе).

5.  **Тестирование:**

    - Проверка работоспособности всех функций приложения (требуется реализация).

6.  **Деплой:**
    - Подготовка инструкции по развертыванию (требуется реализация).
    - Развертывание приложения на выбранном сервере (требуется реализация).

**3. Подробное описание этапов:**

1.  **Технологии:**
    - Flask – для backend-логики (используется).
    - HTML, CSS, JS для frontend (используются).
2.  **JSON:**
    - Использование стандартной библиотеки Python `json` (используется).
    - Файлы с описанной выше структурой (созданы).
3.  **Фронтенд:**
    - HTML - структура страниц (частично реализовано).
    - CSS - стилизация (частично реализована).
    - JS - динамика (частично реализована).
4.  **Разработка:**
    - Создание Flask приложения, маршрутов, функций (частично реализовано).
    - Реализация логики для каждого уровня доступа (админ, пользователь) (частично реализовано).
5.  **Авторизация:**
    - Чтение файла `users.json` для проверки данных (реализовано).
    - Сравнение введенных логина и пароля (реализовано).

**4. Шаги:**

- Создан репозиторий на GitHub (создан).
- Создан Flask проект (создан).
- Созданы JSON файлы (созданы).
- Разработаны функции для работы с JSON (созданы).
- Разработана авторизация/регистрация (частично реализовано).
- Разработаны шаблоны страниц и функционал (частично реализовано). \* Реализовано отображение инвентаря на странице магазина и динамическая фильтрация.

**5. Дальнейшие шаги:**

1.  **Завершить функциональность авторизации и регистрации:**
    - Добавить возможность создавать новых пользователей (только для администратора).
2.  **Реализовать функциональность администратора:**
    - Разработать страницы для управления инвентарем (добавление, редактирование, удаление).
    - Реализовать функции для закрепления инвентаря за пользователями.
    - Разработать страницы для планирования закупок.
    - Реализовать создание отчетов по инвентарю.
3.  **Реализовать функциональность пользователя:**
    - Разработать механизм подачи заявок на инвентарь.
    - Разработать страницы для отслеживания статуса заявок.
    - Реализовать возможность подачи заявок на ремонт или замену инвентаря.
4.  **Тестирование:**
    - Провести полное тестирование всех функций.
5.  **Документация:**
    - Завершить оформление всей необходимой документации.
6.  **Деплой:**
    - Подготовить инструкцию и развернуть приложение.

Этот план отражает текущее состояние проекта и определяет следующие шаги для его завершения в соответствии с поставленными требованиями.
